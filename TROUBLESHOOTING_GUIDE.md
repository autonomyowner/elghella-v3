# ๐ง ุฏููู ุฅุตูุงุญ ุฃุฎุทุงุก ูุดุฑ ุงูููุชุฌุงุช - TROUBLESHOOTING GUIDE

## โ๏ธ ุงููุดููุฉ: "ูุดู ูู ูุดุฑ ุงูููุชุฌ: ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน"

ูุฐุง ุงูุฏููู ุณูุณุงุนุฏู ูู ุชุดุฎูุต ูุฅุตูุงุญ ูุดููุฉ ูุดุฑ ุงูููุชุฌุงุช ูู ููุตุฉ ุงูุบูุฉ.

---

## ๐ ุงูุฎุทูุฉ 1: ุงูุชุดุฎูุต ุงูุณุฑูุน

### ุฃ) ุชุญูู ูู ูุญุฏุฉ ุงูุชุญูู (Console)
1. ุงูุชุญ ุฃุฏูุงุช ุงููุทูุฑ ูู ุงููุชุตูุญ (`F12`)
2. ุงูุชูู ุฅูู ุชุจููุจ **Console**
3. ุงุจุญุซ ุนู ุฑุณุงุฆู ุฎุทุฃ ุชุจุฏุฃ ุจู `๐ DEBUG:`

### ุจ) ุงุณุชุฎุฏู ุฒุฑ ุงููุญุต
1. ุงุฐูุจ ุฅูู ุตูุญุฉ ุฅุถุงูุฉ ุงูููุชุฌ `/add-product`
2. ุงููุฑ ุนูู ุฒุฑ **๐ ูุญุต** (ูุธูุฑ ููุท ูู ูุถุน ุงูุชุทููุฑ)
3. ุชุญูู ูู ุงููุชุงุฆุฌ ูู Console

---

## ๐๏ธ ุงูุฎุทูุฉ 2: ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฃ) ุชุดุบูู ุณูุฑูุจุช ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช
1. ุงูุชูู ุฅูู [Supabase Dashboard](https://supabase.com/dashboard)
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู **SQL Editor**
4. ุงูุณุฎ ูุงูุตู ุงููุญุชูู ูู ููู `supabase_setup.sql`
5. ุงููุฑ **Run** ูุชูููุฐ ุงูุณูุฑูุจุช

### ุจ) ุงูุชุญูู ูู ุงูุฌุฏุงูู
ุชุฃูุฏ ูู ูุฌูุฏ ูุฐู ุงูุฌุฏุงูู:
- โ `marketplace_items` (ุงูุฌุฏูู ุงูุฃุณุงุณู)
- โ `products` (ุฌุฏูู ุงุญุชูุงุทู)
- โ `listings` (ุฌุฏูู ุงุญุชูุงุทู ุซุงูู)

---

## ๐ ุงูุฎุทูุฉ 3: ุฅุนุฏุงุฏุงุช ุงูุฃูุงู (RLS)

### ุฃ) ุชูุนูู Row Level Security
```sql
ALTER TABLE marketplace_items ENABLE ROW LEVEL SECURITY;
ALTER TABLE products ENABLE ROW LEVEL SECURITY;
ALTER TABLE listings ENABLE ROW LEVEL SECURITY;
```

### ุจ) ุฅุถุงูุฉ ุณูุงุณุงุช ุงูุฃูุงู
```sql
-- ูููุฑุงุกุฉ ุงูุนุงูุฉ
CREATE POLICY "Allow public read access on marketplace_items" 
ON marketplace_items FOR SELECT USING (true);

-- ููุฅุฏุฑุงุฌ ูููุณุชุฎุฏููู ุงููุณุฌููู
CREATE POLICY "Allow authenticated insert on marketplace_items" 
ON marketplace_items FOR INSERT TO authenticated WITH CHECK (true);
```

---

## ๐ผ๏ธ ุงูุฎุทูุฉ 4: ุฅุนุฏุงุฏ ุชุฎุฒูู ุงูุตูุฑ

### ุฃ) ุฅูุดุงุก bucket ููุตูุฑ
```sql
INSERT INTO storage.buckets (id, name, public) 
VALUES ('product-images', 'product-images', true)
ON CONFLICT (id) DO NOTHING;
```

### ุจ) ุณูุงุณุงุช ุชุฎุฒูู ุงูุตูุฑ
```sql
CREATE POLICY "Allow public read access on product-images" 
ON storage.objects FOR SELECT TO public USING (bucket_id = 'product-images');

CREATE POLICY "Allow authenticated upload to product-images" 
ON storage.objects FOR INSERT TO authenticated WITH CHECK (bucket_id = 'product-images');
```

---

## ๐ ุงูุฎุทูุฉ 5: ุงูุชุญูู ูู ุงููุตุงุฏูุฉ

### ุฃ) ุชุญูู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
ูู ููู `.env.local`:
```
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```

### ุจ) ุงุฎุชุจุงุฑ ุชุณุฌูู ุงูุฏุฎูู
1. ุณุฌู ุงูุฏุฎูู ุฅูู ุญุณุงุจู
2. ุชุญูู ูู ูุญุฏุฉ ุงูุชุญูู ูู ูุฌูุฏ ูุนูููุงุช ุงููุณุชุฎุฏู
3. ุฌุฑุจ ุฅุถุงูุฉ ููุชุฌ ุจุณูุท

---

## โ ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุญููููุง

### 1. **"relation marketplace_items does not exist"**
**ุงูุญู:** ุชุดุบูู ุณูุฑูุจุช ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. **"permission denied for table"**
**ุงูุญู:** ุชูุนูู RLS ูุฅุถุงูุฉ ุงูุณูุงุณุงุช ุงูููุงุณุจุฉ

### 3. **"JWT expired" ุฃู "invalid JWT"**
**ุงูุญู:** 
```javascript
// ุชุณุฌูู ุงูุฎุฑูุฌ ูุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
await supabase.auth.signOut();
// ุซู ุชุณุฌูู ุงูุฏุฎูู ูุฑุฉ ุฃุฎุฑู
```

### 4. **"bucket product-images does not exist"**
**ุงูุญู:** ุฅูุดุงุก bucket ุงูุตูุฑ ูู Supabase Storage

### 5. **"Network error" ุฃู "fetch failed"**
**ุงูุญู:** ุชุญูู ูู:
- ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
- ุนููุงู URL ุงูุตุญูุญ ูู Supabase
- ุฅุนุฏุงุฏุงุช ุงูู CORS

---

## ๐งช ุงุฎุชุจุงุฑุงุช ุฅุถุงููุฉ

### ุฃ) ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฏููุงู
```javascript
// ูู ูุญุฏุฉ ุงูุชุญูู
const { data, error } = await supabase
  .from('marketplace_items')
  .select('*')
  .limit(5);
console.log({ data, error });
```

### ุจ) ุงุฎุชุจุงุฑ ุฅุฏุฑุงุฌ ุจุณูุท
```javascript
const { data, error } = await supabase
  .from('marketplace_items')
  .insert({
    title: 'ุงุฎุชุจุงุฑ',
    description: 'ููุชุฌ ุชุฌุฑูุจู',
    category: 'land',
    type: 'sale',
    price: 100
  });
console.log({ data, error });
```

---

## ๐ ุทูุจ ุงููุณุงุนุฏุฉ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ูุฑุฌู ุชูุฏูู ุงููุนูููุงุช ุงูุชุงููุฉ:

1. **ุฑุณุงูุฉ ุงูุฎุทุฃ ุงููุงููุฉ** ูู ูุญุฏุฉ ุงูุชุญูู
2. **ูุชุงุฆุฌ ุฒุฑ ุงููุญุต** (๐ ูุญุต)
3. **ุฎุทูุงุช ุฅุนุงุฏุฉ ุงูุฅูุชุงุฌ** ูููุดููุฉ
4. **ูุนูููุงุช ุงููุชุตูุญ** ูุงููุธุงู
5. **ููุทุฉ ุดุงุดุฉ** ูู ุงูุฎุทุฃ

### ูุนูููุงุช ุชูููุฉ ูููุทูุฑูู:
- **Supabase URL:** `https://idudgypbhjefelzshofm.supabase.co`
- **ุงูุฌุฏุงูู ุงููุทููุจุฉ:** marketplace_items, products, listings
- **ุงูู bucket ุงููุทููุจ:** product-images
- **ุงููุตุงุฏูุฉ:** ูุฌุจ ุฃู ูููู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู

---

## โ ุงูุชุญูู ูู ูุฌุงุญ ุงูุฅุตูุงุญ

ุจุนุฏ ุชุทุจูู ุงูุญููู:

1. โ ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ
2. โ ุฒูุงุฑุฉ ุตูุญุฉ ุฅุถุงูุฉ ุงูููุชุฌ
3. โ ููุก ุงููููุฐุฌ ุจุงููุงูู
4. โ ุฑูุน ุตูุฑุฉ (ุงุฎุชูุงุฑู)
5. โ ุงูููุฑ ุนูู "ูุดุฑ ุงูููุชุฌ"
6. โ ุธููุฑ ุฑุณุงูุฉ "ุชู ูุดุฑ ููุชุฌู ุจูุฌุงุญ!"
7. โ ุงูุงูุชูุงู ุฅูู ุตูุญุฉ ุงูููุงุฆู ุงูุนุงูุฉ

ุฅุฐุง ุชู ูู ูุฐุง ุจูุฌุงุญุ ููุฏ ุชู ุฅุตูุงุญ ุงููุดููุฉ! ๐